---
import { getCollection } from "astro:content";
import CaretDown from "~/components/svg/icons/CaretDown.astro";

const faqItems = (await getCollection("faq"))
  .toSorted((a, b) => a.id.localeCompare(b.id))
  .map((entry) => entry.data);
---

<section class="mx-auto w-full max-w-6xl px-6 py-14">
  <div class="space-y-2">
    <p
      class="text-sm font-semibold tracking-[0.2em] text-jet-black/60 uppercase"
    >
      FAQ
    </p>
    <h2 class="font-display text-3xl font-semibold text-onyx">
      Research, explained clearly.
    </h2>
    <p class="max-w-2xl text-base text-jet-black/70">
      Answers to the most common questions about the Orion Vale research desk.
    </p>
  </div>

  <div class="mt-8 grid gap-4">
    {
      faqItems.map((item, index) => (
        <details
          class="group rounded-3xl border border-jet-black/10 bg-white px-6 py-5 shadow-sm"
          name="faq"
          open={index === 0}
        >
          <summary class="flex cursor-pointer list-none items-center justify-between gap-4 text-left">
            <span class="font-display text-lg font-semibold text-onyx">
              {item.question}
            </span>
            <CaretDown
              class="size-5 shrink-0 text-jet-black/60 transition group-open:rotate-180"
              aria-hidden="true"
            />
          </summary>
          <p class="mt-3 text-sm text-jet-black/70">{item.answer}</p>
        </details>
      ))
    }
  </div>
</section>
